(function(){var a;a=function(){function a(a){a==null&&(a={}),this.width=a.width||40,this.height=a.height||40,a.grid!=null?this.grid=this.cloneGrid(a.grid):this.grid=this.initGrid()}return a.prototype.grid=[],a.prototype.lastGrid=[],a.prototype.initGrid=function(){var a,b,c,d=this;return function(){c=[];for(var a=1,b=this.height;1<=b?a<=b:a>=b;1<=b?a++:a--)c.push(a);return c}.apply(this).map(function(){var a,b,c;return function(){c=[];for(var a=1,b=d.width;1<=b?a<=b:a>=b;1<=b?a++:a--)c.push(a);return c}.apply(this).map(function(){return"dead"})})},a.prototype.cloneGrid=function(a){return a.map(function(a){return a.map(function(a){return a})})},a.prototype._cellStatus=function(a,b){return a===-1?a=this.height-1:a===this.height&&(a=0),b===-1?b=this.width-1:b===this.width&&(b=0),this.lastGrid[a][b]},a.prototype._neighbours=function(a,b){var c,d,e=this;return c={dead:0,alive:0},d=[-1,0,1],d.forEach(function(f){return d.forEach(function(d){if(f!==0||d!==f)switch(e._cellStatus(a+f,b+d)){case"alive":return c.alive++;case"dead":return c.dead++}})}),c},a.prototype._cycle=function(){var a=this;return(this.lastGrid=this.cloneGrid(this.grid)).forEach(function(b,c){return b.forEach(function(b,d){var e;e=a._neighbours(c,d);switch(a.lastGrid[c][d]){case"alive":if(e.alive<2||e.alive>3)return a.grid[c][d]="dead";break;case"dead":if(e.alive===3)return a.grid[c][d]="alive"}})})},a.prototype.randomize=function(){return this.grid=this.grid.map(function(a){return a.map(function(){return Math.floor(Math.random()*10)%3===0?"alive":"dead"})})},a.prototype.cycle=function(){return this._cycle()},a}(),window.GameOfLifeGrid=a}).call(this),function(){var a;a=function(){function a(a){a==null&&(a={}),this.grid=new GameOfLifeGrid(a),this.$node=a.node,this.init(a)}return a.prototype.init=function(a){a==null&&(a={})},a.prototype.cycle=function(){return this.grid.cycle()},a.prototype.randomize=function(){return this.grid.randomize()},a}(),window.GameOfLifeBoard=a}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};a=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype._boardBuffer="",b.prototype._print=function(a){return this._boardBuffer+=a},b.prototype.printBoard=function(){var a,b,c,d,e,f,g,h,i,j=this;return c=function(){h=[];for(var a=0,b=this.grid.width+1;0<=b?a<=b:a>=b;0<=b?a++:a--)h.push(a);return h}.apply(this),b=function(){i=[];for(var a=0,b=this.grid.height-1;0<=b?a<=b:a>=b;0<=b?a++:a--)i.push(a);return i}.apply(this),a=this.grid.grid,this._boardBuffer="",c.forEach(function(){return j._print("-")}),this._print("\n"),a.forEach(function(b,c){return j._print("|"),a[c].forEach(function(a,b){return a==="alive"?j._print("X"):j._print(".")}),j._print("|\n")}),c.forEach(function(){return j._print("-")}),this._print("\n")},b}(GameOfLifeBoard),window.GameOfLifeText=a}.call(this),function(){$(function(){var a,b;return a=new GameOfLifeText({height:35,width:85}),a.randomize(),b=function(){return a.printBoard(),a.cycle(),$("#gameoflife").html("<pre>"+a._boardBuffer+"</pre>")},setInterval(b,200)})}.call(this);